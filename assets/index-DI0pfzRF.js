var w=Object.defineProperty;var m=(t,e,i)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var r=(t,e,i)=>m(t,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();const c=25,x=8;class f{constructor(e,i){r(this,"x");r(this,"y");r(this,"toStr",()=>this.x.toString()+","+this.y.toString());this.x=e,this.y=i}}function u(t,e){return t.x+t.w>e.x&&t.x<e.x+e.w&&t.y+t.h>e.y&&t.y<e.y+e.h}class p{constructor(e,i,h=0){r(this,"pos");r(this,"active");this.pos=new f(e,i),this.active=h}}class S{constructor(e,i){r(this,"direction");r(this,"body");r(this,"size");r(this,"speed");r(this,"alive",!0);r(this,"getHead",()=>this.body[0].pos);r(this,"getTail",()=>this.body[this.body.length-1].pos);r(this,"checkCollisions",()=>{for(let e=3;e<this.body.length;e++){if(this.body[e].active!==0)continue;const i={x:this.getHead().x,y:this.getHead().y,w:this.size,h:this.size},h={x:this.body[e].pos.x,y:this.body[e].pos.y,w:this.size,h:this.size};u(i,h)&&this.die()}(this.getHead().x<0||this.getHead().x>=a.width||this.getHead().y<0||this.getHead().y>=a.height)&&this.die()});r(this,"die",()=>{this.alive=!1});r(this,"setDirection",e=>{this.body.length===1&&(this.direction=e),(this.direction===0||this.direction===2)&&(e===3||e===1)?this.direction=e:(this.direction===3||this.direction===1)&&(e===0||e===2)&&(this.direction=e)});r(this,"move",()=>{if(!this.alive){for(let e=0;e<this.body.length;e++)if(this.body[e].active!=-1){this.body[e].active=-1;return}return}for(let e=this.body.length-1;e>0;e--)this.body[e].active===0?(this.body[e].pos.x=this.body[e-1].pos.x,this.body[e].pos.y=this.body[e-1].pos.y):this.body[e].active--;switch(this.direction){case 0:this.getHead().y-=this.speed;break;case 1:this.getHead().x+=this.speed;break;case 2:this.getHead().y+=this.speed;break;case 3:this.getHead().x-=this.speed;break}});this.direction=4,this.body=[],this.size=c,this.speed=c,this.body.push(new p(e,i))}}function g(){let t={};for(let s=0;s<a.width;s+=c)for(let l=0;l<a.height;l+=c){let b=new f(s,l);t[b.toStr()]=!0}n.body.forEach(s=>{s.pos.toStr()in t&&delete t[s.pos.toStr()]}),y.forEach(s=>{s.toStr()in t&&delete t[s.toStr()]});let i=Object.keys(t);if(i.length<=0)throw new Error("No possible points for food");let h=i[Math.floor(Math.random()*i.length)],o=new f(parseInt(h.split(",")[0]),parseInt(h.split(",")[1]));y.push(o)}const a=document.getElementById("game"),d=a.getContext("2d"),n=new S(0,0);let y=[];window.addEventListener("keydown",function(t){t.defaultPrevented||(t.key=="ArrowUp"||t.code=="KeyW"?n.setDirection(0):t.key=="ArrowRight"||t.code=="KeyD"?n.setDirection(1):t.key=="ArrowDown"||t.code=="KeyS"?n.setDirection(2):(t.key=="ArrowLeft"||t.code=="KeyA")&&n.setDirection(3),t.preventDefault())},!0);function k(){d.fillStyle="black",d==null||d.fillRect(0,0,a.width,a.height),d.fillStyle="red",y.forEach(e=>{d==null||d.fillRect(e.x,e.y,c,c)}),d.fillStyle="green",n.body.forEach(e=>{e.active===-1&&(d.fillStyle="gray"),d==null||d.fillRect(e.pos.x,e.pos.y,n.size,n.size)})}function H(){k();let t=-1;for(let e=0;e<y.length;e++){const i=y[e],h=n.getHead();if(u({x:h.x,y:h.y,w:n.size,h:n.size},{x:i.x,y:i.y,w:c,h:c})){n.body.push(new p(i.x,i.y,n.body.length)),t=e;break}}t!==-1&&(y.splice(t,1),g()),n.checkCollisions(),n.move()}for(let t=0;t<5;t++)g();setInterval(H,Math.floor(1e3/x));
